jQuery.entwine("ss",(function($){$("div.csv-importer").entwine({onmatch:function(){this.hide()}}),$("#action_importcsv").entwine({onclick:function(e){$("div.csv-importer").entwine(".",(function($){this.toggle()}))}}),$("#csvupload").on("change",(function(){let e=$(".toggle-csv-fields").data("url"),t=$(this).prop("files")[0];if(!t)return void alert("Please select a file.");if("text/csv"!==t.type)return void alert("Please upload a CSV file.");let n=new FormData;n.append("file",t),$.ajax({url:e+"/importer/saveInto",dataType:"text",cache:!1,contentType:!1,processData:!1,data:n,type:"POST",success:function(e){try{const t=JSON.parse(e);t&&t[0]&&t[0].import_url?window.location.href=t[0].import_url:alert("Unexpected response format.")}catch(e){alert("Failed to parse response.")}},error:function(e,t,n){alert("Error: "+t+" - "+n)}})}))}));